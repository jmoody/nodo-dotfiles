#!/bin/bash

set -euo pipefail
set -x

# install packages
sudo apt-get update && apt-get install -y build-essential

# link dotfiles
files=(
	"ripgreprc"
	"gitconfig"
	"tmux.conf"
	"zshrc"
)
for file in ${files[@]}; do
	ln -fs ${PWD}/config/${file} ${HOME}/.${file}
done

# linuxbrew
curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh -o /tmp/install-homebrew.sh
sh /tmp/install_homebrew.sh
HOMEBREW_INSTALL_FROM_API=true brew bundle install --no-lock --file ${PWD}/Brewfile

# starship
mkdir -p ${HOME}/.config
starship preset pure-preset -o ${HOME}/.config/starship.toml

# zsh
curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh -o /tmp/install-ohmyzsh.sh
rm -rf ${HOME}/.oh-my-zsh
sh /tmp/install-ohmyzsh.sh --keep-zshrc
sudo chsh -s /bin/zsh codespace
